# 4.4 Given a scenario, analyze a basic script (limited to Bash, Python, Ruby, and PowerShell).
# Bash
## Logic
### Looping
for var in list
do
    Statements
done


### Flow control
if condition
then
    commands
elif condition
then
    commands
else
    commands
fi


## I/O
### File vs. terminal vs. network
* Positional arguments can be passed in and reference such as: $1, $2, $3, and so on.
* Environment variables are referenced like: $PATH
* Values from utilities: $(whoami) - grabs whoami and sets the value to the variable.

#### Termial
```
read -p "Enter your name: " name; echo "Hi, " $name
```
#### File
```
input="filePathName"
while IFS=read -r f1 f2 f3 f4
```
#### Network
```
while read -r inline </dev/ttyS1
```

## Substitutions
* Environment: `$env VarName`
  * eg: `JAVAPATH=${$JAVAHOME:=/usr/lib/java}` - if JAVAHOME is empty, this sets a default value.

## Variables
$varname={value}

## Common operations
### String operations
* Length: `${#string}`
* Substring: `${string:position}`
* Replace: `${string/substring/replacement}`

### Comparisons
AND -a
OR: -o

eg:
`if["$varA" -eq "$varB"]`

Equal: -eq OR ==
Not Equal: -ne OR !=
Greater than, greater than or equal to,: -gt OR >, -ge OR >=
Less than, less than or equal to,: -lt OR <>, -le OR <>=
Not null: -n
Null: -z

#### If conditions
| -d file | True if file is a directory |
| -e file | True if file exists |
| -f file | True if file exists and is a regular file |
| -z string | True if string is a null (empty) string |
| -n string | True if string is not a null (empty string) |
| stringA = stringB | True if strings are equal |
| string A != stringB | True if strings are not equal |

* Test command: `if test -eq $name "Michael"`
* `break` - exits the current loop iteration
* `exit` - exits a script and returns a value (exit code)


## Error handling
"$?" is the exit status of a script we just ran
`if["$?" = "0"] then `

## Arrays
```
bashArray = (val1, val2, val3)
declare -a bashArray = (val1, val2, val3)

for i in 1 2 3
do
   echo ${bashArray[$i]}
done
```

## Encoding/decoding
Can change the assignment of the LANG environment variable for local character encoding
* Allows for bash to accept special characters, such as those from other languages.

### Encoding
`echo string | base64` or `base64 <<< string`

### Decoding
`echo string | base64 --decode` or `base64 -d <<< string`


# PowerShell
Before you are able to run local scripts, as an admin:
`Set-ExecutionPolicy Unrestricted`

## Logic
### Looping
For, While, Do-While, Do-Until

### Flow control
if(condition) {
  statements
} elseif(condition) {
  statements
} else {
  statements
}

## I/O
### File vs. terminal vs. network
#### File
```
$lines = Get-Content filename
Out-File -FilePath filename -InputObject $lines -Encoding ASCII
```
#### Terminal
`$firstName = Read-Host -Prompt 'Enter first name'`

#### Network
```
$socket = new-object System.Net.Sockets.TCPClient($ip, $port)
if($socket.Connected){}
```

## Substitutions
* Environment: `Get-item Env:varName`
## Variables
* Declare: `$myvar = 'value'`
* Print: `Write-Host $myvar``
## Common operations
### String operations
* Length: `string.Length`
* Substring: `string.Substring(start,end)`
* Replace: `string.Replace(substr,replacement)`

### Comparisons
-and, -or, -not!
-eq, -ne, -gt, -ge, -lt, -le

## Error handling
```
try{
  Command
}
catch{
  errHandling commands
}
```

## Arrays
```
$PSarray=@(1,2,3)
for($i=0;$i -lt $PSarray.Length; $i++) {
$PSarray[$i]
}

foreach ($element in $PSarry) {
	$element
}
```

## Encoding/decoding
```
# Encode
$Text = 'hello world'
$Bytes = [System.Text.Encoding]::Unicode.GetBytes($Text)
$EncodedText = [Convert]::ToBase64String.($Bytes)

# Decode
$EncodedText = 'encoded string'
$DecodedText = [System.Text.Encoding]::Unicode.GetString([System.Convert]::FromBase64String($EncodedText)
```

# Ruby
## Logic
## Looping
while, until, for

## Flow control
If condition then
  statements
elsif
  statements
else
  statements
end

## I/O
### File vs. terminal vs. network
#### File
```
inFile = File.new("filename", "r")
inFile.each_line{|line| puts "#{line.dump}"}
inFile.close
```
#### Terminal
name = gets
`MYVAR = ARGV[0]`

#### Network
```
client = TCPSocket.open('hostname, 'port')
client.send("string", o)
```

## Substitutions
* Environment: `ENV['ENVNAME']`
## Variables
* Declare: `myvar = 'value'`
* Print: `puts myvar`

## Common operations
### String operations
* Length: `string.length`
* Substring: `string[1..3]`
* Replace: `string[1..3] = replStr`
### Comparisons
and &&, or ||, not !
==, !=, >, >=, <, <=

## Error handling
```
begin
	statements
rescue
	statements
if no error
end
```

## Arrays
```
rubyArray = [1, 2, 3]
print rubyArray[1]
print rubyArray.index(2)
```

## Encoding/decoding
```
Require "base64"
# Encode
encString = Base64.encode64('Hello world!')

# Decode
plaintext = Base64.decode(enc)
```


# Python
## Logic
### Looping
for, while
### Flow control
```
if condition:
	statements
elif condition:
	statements
else:
	statements
```
## I/O
### File
```
file=open('infile.txt', 'r')
for line in f:
	dosomething()
f.close
```

### Terminal
'name = input("what is your name?)'

### Network
```
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
if sock.connect_ex((remoteServerIP, port)) == o:
	print ('Port {}: is Open'.formate(port)
```

## Substitutions
* Environment variables: `os.env['ENV']`
## Variables
* Declare: `varname=value`
* Print: `print(varname)`

## Common operations
### String operations
* Length: `len(string)`
* Substring: `string[start:end]`
* Replace: `string.replace(old, new, count)`

### Comparisons
and, or, not,
==, !=, >, >=, <, <=
## Error handling
```
try:
	statement
raise CustomError
except Error:
	statement
finally:
	cleanup
```

## Arrays
```
pythonarray = [1,2,3]
print(pythonarray[1]
```

## Encoding/decoding
```
# Encode
string.encode('UTF-8')

# Decode
string.decode('UTF-8')
```
